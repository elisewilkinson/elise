!function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}var e=function h(t){if(!(this instanceof h))return new h(t);h.t(t)?this.o=document.querySelectorAll(t):h.i(t)?t.o?this.o=t.o:this.o[0]=t:this.o=[]},n=e.prototype={get length(){return this.o.length}};n.o=[],n.l=function(t){for(var e=0;e<this.o.length;e++){var n=t(this.o[e],e);if(n)return n}return this},e.i=function(t){return Object(t)===t},e.t=function(t){return"string"==typeof t},n.u=function(t){var e=t.split(" ");return this.l((function(n){n.classList?n.classList.add.apply(n.classList,e):n.className+=" "+t}))},e.h={method:"POST",async:!0},e.v=function(t){var n,o="GET"==(t=Object.assign(Object.assign({},e.h),t)).method;if(t.p){var i=[];for(var r in t.p)o?i.push(encodeURIComponent(r)+"="+encodeURIComponent(t.p[r])):i.push(r+"="+t.p[r]);i=i.join("&")}o?i&&(t.url+="?"+i):t.p=i,(n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){4==n.readyState&&(/^2/.test(n.status)?t.g&&t.g(n.response):t.m&&t.m(n),t.complete&&t.complete(n))},t.k&&t.k(),n.open(t.method,t.url,t.async),o?(n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send()):(n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(t.p))},n.C=function(t,e,n,o,i,r){var a=n+" "+e+"s "+(o=o||"linear")+" 0s 1 "+{show:"reverse",hide:"normal"}[t],c=["inherit","inherit"];return"hide"==t&&(c=["inherit","none"]),this.l((function(t){var n=t.style;n.display=c[0],i&&(n.transformOrigin=i),n.animation=a,setTimeout((function(){n.display=c[1],n.transformOrigin="",n.animation="",r&&r()}),1e3*e-10)}))},e.O=function(t){return e.t(t)?t:t.join("")},n.F=function(t,n){if(this.length){var o=this;return e.S(t,n,(function(t){return o.o[0].getAttribute(t)}),(function(t){return Object.keys(t).map((function(e){o.l((function(n){n.setAttribute(e,t[e])}))})),o.o}))}},n.click=function(t){return this.l((function(e){e.onclick=t}))},n.create=function(t){var n=e.T(t);e.t(n)&&(n={type:n});var o=n.type;if(delete n.type,o.includes(":")){var i=o.split(":");o=i[0],n.type=i[1]}var r=document.createElement(o);if(Object.keys(n).map((function(t){t.match(/^(on)/)?r[t]=n[t]:"html"==t?r.innerHTML=n.html:r.setAttribute(t,n[t])})),n.type=o,this.length){var a=[];return this.l((function(t,e){var n=r;e>0&&(n=r.cloneNode(!0)),a.push(t.appendChild(n))})),this.o=a,this}return r},n.M=function(t,n){if(this.length){var o=this;return e.S(t,n,(function(t){return getComputedStyle(o.o[0])[t]}),(function(t){return Object.keys(t).map((function(e){o.l((function(n){n.style[e]=t[e]}))})),o}))}},e.S=function(t,n,o,i){if(e.t(t)){if(n){var r={};return r[t]=n,i(r)}return o(t)}if(e.i(t))return i(t)},e.A=function(t,e,n){var o=document.createElement(t);return o.setAttribute("class",e),null==n||(o.innerHTML=n),o};e._=!1,e.G=function(n,o,i,r,a){var c={title:null,D:"",B:null,P:null,R:"OK",I:"Cancel",placeholder:"Enter value",N:!1,W:!0,defaultValue:"",j:"",H:"body"};if("alert"==a&&(c.I=null),"object"===t(n)){for(var s in n)c[s]=n[s];"function"!=typeof c.B&&(c.B=null),"function"!=typeof c.P&&(c.P=null)}else c.title="string"==typeof n?n:c.title,c.D="string"==typeof o?o:c.D,c.B="function"==typeof i?i:c.B,c.P="function"==typeof r?r:c.P,"function"==typeof o&&(c.B=o);c.type&&(a=c.type);var l=document.getElementsByClassName("msc-confirm");"modal"!==a&&l.length>0?document.body.removeChild(l[0]):l.length>0&&l[0].parentElement.removeChild(l[0]);var u=e.A("div","msc-confirm"),f=e.A("div","msc-overlay");c.N&&f.addEventListener("click",y);var d=e.A("div","msc-content"),v=e.A("div","msc-body"),w=e.A("div","msc-action");if(c.R)var p=e.A("button","msc-ok",c.R);if(c.I)var m=e.A("button","msc-cancel",c.I);if(c.title&&d.appendChild(e.A("h3","msc-title",c.title)),c.D&&v.appendChild(e.A("p","msc-sub",c.D)),d.appendChild(v),m&&(w.appendChild(m),m.addEventListener("click",x)),"modal"!==a)p&&(w.appendChild(p),p.addEventListener("click",k)),d.appendChild(w);else if(d.classList.add("msc-modal"),c.W){var g=e.A("button","msc-close");g.innerHTML="&times;",d.appendChild(g),g.addEventListener("click",y)}if(u.appendChild(f),u.appendChild(d),e(c.H).J().appendChild(u),e._=!0,u.style.display="block",d.classList.add("msc-confirm--animate"),"body"!=c.H&&u.classList.add("msc-notonbody"),c.j&&u.classList.add(c.j),"prompt"===a){var b=e.A("input","msc-input");b.setAttribute("type","text"),b.setAttribute("placeholder",c.placeholder),b.value=c.defaultValue,b.addEventListener("keyup",(function(t){13===t.keyCode&&k()})),v.appendChild(b),b.focus()}else"alert"===a?p&&p.focus():m&&m.focus();function y(){if(u){e._=!1,g&&g.removeEventListener("click",y),p&&p.removeEventListener("click",k),m&&m.removeEventListener("click",x),c.N&&f.removeEventListener("click",y);try{e(c.H).J().removeChild(u)}catch(t){}}}function k(){y(),null!==c.B&&("prompt"===a?c.B(b.value):c.B())}function x(){y(),null!==c.P&&c.P()}"modal"==a&&(v.innerHTML=c.content),e(".msc-destroy").on("click",y),e.$=y},e.L=function(){e._&&e.$()},e.alert=function(t,n,o,i){e.G(t,n,o,i,"alert")},e.confirm=function(t,n,o,i){e.G(t,n,o,i,"confirm")},e.prompt=function(t,n,o,i){e.G(t,n,o,i,"prompt")},e.q=function(t){var n=e.A("div","msc-toast");n.innerHTML=t,document.body.appendChild(n),setTimeout((function(){n.className+=" msc-toast-fadeout",setTimeout((function(){document.body.removeChild(n)}),3100)}),1e3)},e.X=function(t,n,o,i,r,a){void 0===a&&(a=!0),e.G({type:"modal",title:t,N:o||!1,j:i,H:r=r||"body",W:a,content:n||""})},n.find=function(t){if(this.length)return this.o=this.o[0].querySelectorAll(t),this},n.J=function(){return this.o[0]||!1},n.U=function(t){return this.J().classList.contains(t)},n.hide=function(){return this.l((function(t){t.style.display="none"}))},n.html=function(t){return void 0===t?this.o[0].innerHTML:(t=e.O(t),this.l((function(e){e.innerHTML=t})))},n.Y=function(t,n){return n={top:"afterbegin",bottom:"beforeend",before:"beforebegin",after:"afterend"}[n=n||"bottom"],t=e.O(t),this.l((function(e){e.insertAdjacentHTML(n,t)}))},n.K=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"admain",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"position:absolute!important;top:20px;left:20px;width:10px;height:10px;",n=!1,o=this.create({type:"div",id:t,class:t,style:e}).J(),i=o.getBoundingClientRect();return 0!=i.height&&0!=i.width||(n=!0),n},e.V=function(){return(/Android|iPad|iPhone|iPod|IEMobile|Opera Mini/.exec(navigator.userAgent)||(navigator.platform.includes("Mac")&&navigator.maxTouchPoints>1?["iPad"]:null)||[!1])[0]},e.Z=function(){return!!("ontouchstart"in window)||!!("tt"in window.navigator)},n.nt=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;if(this.length){var i=this,r=document.createElement("script");return r.type="text/javascript",r.async=e,n&&(r.onload=n),o&&(r.onerror=o),r.src=t,i.J().appendChild(r)}},e.localStorage=function(){var t=localStorage;this.et=!1;try{var e="test";t.setItem(e,e),t.removeItem(e),this.et=!0}catch(t){this.et=!1}this.set=function(e,n){this.et&&t.setItem(e,n)},this.get=function(e){if(this.et)return t.getItem(e)},this.remove=function(e){this.et&&t.removeItem(e)}},n.ot=function(t,e){var n=this;t?t.split(/\s+/g).forEach((function(t){n.l((function(n){n.removeEventListener(t,e)}))})):this.l((function(t){t.parentNode.replaceChild(t.cloneNode(!0),t)}))},n.on=function(t,e){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{passive:!0},i=t.split(/\s+/g);i.forEach((function(t){n.l((function(n){n.addEventListener(t,e,o)}))}))},e.T=function(t){if(">"!==t[0])return t;var e=t.split(/\$|=/)[0],n={};return[["type",/^>[a-z0-9:_-]*/gi,t],["id",/#[a-z0-9:_-]*/gi,e],["class",/(\.[a-z0-9:_-]*)/gi,e],["value",/\=.*/g,t],["html",/\$.*/g,t]].forEach((function(t){var e=t[2].match(t[1]);e&&(n[t[0]]=e.map((function(t){return t.substring(1)})).join(" "))})),n},Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(t){for(var e=Object(t),n=1;n<arguments.length;n++){var o=arguments[n];if(null!=o){o=Object(o);for(var i=Object.keys(Object(o)),r=0,a=i.length;r<a;r++){var c=i[r],s=Object.getOwnPropertyDescriptor(o,c);void 0!==s&&s.enumerable&&(e[c]=o[c])}}}return e}}),String.prototype.includes||(String.prototype.includes=function(t,e){return void 0===e&&(e=0),-1!==this.indexOf(t,e)}),e.ready=function(t){var e=document;"complete"===e.readyState||"interactive"===document.readyState?setTimeout(t,1):e.addEventListener("DOMContentLoaded",t)},n.remove=function(){this.l((function(t){t.parentNode.removeChild(t)}))},n.it=function(t){var e=t.split(" ");return this.l((function(n){n.classList?n.classList.remove.apply(n.classList,e):n.className=n.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}))},e.rt=function(){var t=e.Z();e.at=t?"touchstart":"mousedown",e.ct=t?"touchend":"mouseup",e.st=t?"touchmove":"mousemove"},n.show=function(t){return this.l((function(e){e.style.display=t||"initial"}))},e.lt=function(t){var e=3,n=!1;return t.split("").map((function(t){var o=t.charCodeAt();if(n||"~"!=t)return o-=e,e=parseInt(t.charCodeAt().toString().slice(-1)),n&&(o+=10),n=!1,String.fromCharCode(o);n=!0})).join("")},n.ut=function(t){var e=t.split(" ");return this.l((function(t){t.classList.toggle.apply(t.classList,e)}))},e.ft="",e.dt=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return n&&(n=' style="'+n+'"'),'<svg role="img"'+n+'><use xlink:href="'+e.ft+"#"+t+'"/></svg>'},n.ht=function(t){return void 0===t?this.o.length?this.o[0].value:null:this.l((function(e){e.value=t}))},window.h=e,window.top.location!==window.location&&(window.top.location=window.location);var o=function(){var t=h(".shares");if(t.length){var e=h(t).F("data-url")||document.URL,n=h(t).F("data-img"),o="Word Search Puzzle - "+h(t).F("data-title");h(t).find("li").length||(h(t).create(">li.twitter$Tweet").click((function(){i("//twitter.com/intent/tweet?text=Play an online word search puzzle, "+e+"&hashtags=word,search,wordsearch,puzzle,game",750,540)})),h(t).create(">li.facebook$Post").click((function(){i("//www.facebook.com/sharer.php?u="+e,566,378)})),h(t).create(">li.pinterest$Pin It").click((function(){var t="Play word search puzzles on-line, including this one.\n\nMore at...\nhttps://thewordsearch.com";i("//www.pinterest.com/pin/create/button/?url="+r(e)+"&media="+r(n)+"&description="+r(t),784,382)})),h(t).create(">li.tumblr$Tumblr").click((function(){var t="<b><big><big>"+o+'</big></big><br><br>Play word search puzzles online @ <br><big><a href="https://thewordsearch.com">thewordsearch.com</a></b></big>';i("//www.tumblr.com/share/photo?source="+r(n)+"&click_thru="+r(e)+"&caption="+r(t),500,520)})),h(t).create(">li.reddit$Reddit").click((function(){i("//www.reddit.com/submit?url="+r(e),740,480)}))),window.set_share_img=function(t){n=t}}function i(t,e,h){window.open(t,"shareWin","height="+h+",width="+e+",resizable=no,scrollbars=no,toolbar=no,status=no",!0)}function r(t){return encodeURIComponent(t)}};if(h.ready(o),window.add_shares=o,function(){var t,e="cookie_prefs";function n(){o('<div class="cc-msg">We and our partners use technology such as cookies and localstorage on our site to personalise content and ads. By continuing to use this site, you accept our use of such technologies. <br>Click the "Manage Cookies" button to choose which cookies to accept.<br><a href="/user/privacy/" target="_blank">Read our Privacy Policy</a> and <a href="/user/data_preferences/" target="_blank">Review Data Preferences</a></div><div class="cc-btns"><button onclick="cookieAccept(\'11\')">Accept All</button><button class="btn2" onclick="cookieManage()">Manage Cookies</button></div>')}function o(n){t?(h(t).find("#cookie_inner").html(n),h(t).M("display","flex")):(n='<style>body.noscroll{overflow-y:hidden}#cookie_prefs{display:flex;z-index:99;overflow-y:auto;background:#00000040;justify-content:space-around;align-items:center;position:fixed;left:0;top:0;width:100%;height:100%;}#cookie_inner{width:100%;max-width:800px;max-height:100%;overflow-y:auto;background:#333;color:#f3f3f3;padding:30px;font-family:Arial,sans-serif;font-size:13px;line-height:18px;box-sizing:border-box;}.cc-msg {vertical-align:top;padding:0 0 30px 0;line-height:1.6em;}.cc-btns button{margin:4px 0;padding:18px 12px;font-size:1.4em;font-weight:normal;background:#64d451;border:1px solid #64d451;}.cc-btns .btn2 {background:transparent;color:#64d451}.cc-msg a {text-decoration:none;color:#7cb8c6}#cookie_prefs h3, #cookie_prefs h4 {color:#f3f3f3}#cookie_prefs h4 {margin:0}#cookie_prefs th {text-align:left;font-weight:normal;padding:6px 12px;background:#555;color:#f3f3f3;}#cookie_prefs table {width:100%;margin-bottom:14px;}#cookie_prefs select {padding:8px;background:#555;width:100%;min-width:48px;border:0;color:#f3f3f3;}@media only screen and (min-width: 740px) { #cookie_inner{border:40px solid #333} .cc-msg {padding:0 30px 0 0;display:inline-block;} .cc-btns {margin:40px 20px 0} }</style><div id="cookie_inner">'+n+"</div>",t=h("body").create({type:"div",id:e,html:n})),h("body").u("noscroll")}window.cookieNotify=n,window.cookieManage=function(){var t,e,n,i=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return n&&(n=' style="width:'+n+'px"'),"<tr><th>"+t+"</th><th"+n+">"+e+"</th></tr>"},r='<a href="javascript:cookieNotify()" style="color:#ffc107;text-decoration:none;border:1px solid #ffc107;padding:8px;">back</a>';r+="<h3>Manage Your Cookie Preferences</h3>",r+="<table><tbody>",r+='<tr><th colspan="2"><h4>REQUIRED COOKIES</h4>These are cookies which are required for proper function of the site, they are not tracking cookies</th></tr>',r+=i("Ref","Why"),r+=i("cookie_prefs","Remembers which cookie options you have consented to."),r+=i("settings","Remembers your chosen game settings between visits."),r+=i("theme","Remembers your chosen site theme between visits."),r+=i("created_puzzles","Stores data about puzzles which you have created"),r+="</tbody></table>",r+="<table><tbody>",r+=i("<h4>ADVERTISING COOKIES</h4>These cookies are used by advertising companies to serve ads that are relevant to your interests.",(t="ad_cookies",e=a(2),n="",null!=e&&"1"!=e||(n=" selected"),'<select name="'+t+'"><option value="0">Not Allowed</option><option value="1"'+n+">Allowed</option></select>"),140),r+="</tbody></table>",r+="<table><tbody>",r+=i("<h4>ANALYTICS COOKIES</h4>We do not use analytics on our site.","n/a",140),r+="</tbody></table>",r+='<button onclick="cookieSaveprefs()">Save Preferences</button>',r+="<p>* Note we use the term cookies to refer to both the traditional browser cookie and the more modern localstorage equivalent</p>",o(r+="<p>* You can change your cookie preferences at any time by clicking the link at the bottom of any site page</p>")};var i,r=new h.localStorage;function a(t){var n=function(t){var e=r.get(t);if(e){e=JSON.parse(e);var n=31536e6;return(new Date).getTime()>e.timestamp+n?(r.remove(t),null):e.value}}(e)||function(t){var e,n,o,i=document.cookie.split(";");for(e=0;e<i.length;e++)if(n=i[e].substr(0,i[e].indexOf("=")),o=i[e].substr(i[e].indexOf("=")+1),(n=n.replace(/^\s+|\s+$/g,""))==t)return unescape(o)}(e);if(n)return t?n.charAt(t-1):n}function c(t,e,n){var o=new Date;o.setDate(o.getDate()+n);var i=escape(e)+(null==n?"":";SameSite=Strict;expires="+o.toUTCString()+"; path=/");document.cookie=t+"="+i}window.cookieAccept=function(n){!function(t,e,n){if(r.et){var o={value:e,timestamp:(new Date).getTime()};r.set(t,JSON.stringify(o))}else c(t,e,n);(function(t){document.cookie=t+"=;SameSite=Strict;expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/"})("requestNonPersonalizedAds"),"0"===a(2)&&c("requestNonPersonalizedAds",1,365)}(e,n,365),h(t).M("display","none"),h("body").it("noscroll")},window.cookieSaveprefs=function(){var t=h("[name=ad_cookies]").ht();window.cookieAccept("1"+t)},window.getCookiePref=a,null!=(i=a(1))&&""!=i||(i=-2),i<1&&h.v({method:"GET",url:"/api/cookie_consent/",g:function(t){"true"==t&&n()}}),h(".main_footer").Y('<a href="javascript:cookieManage()">Data Consent Preferences</a>',"top")}(),h.ready((function(){h("section#category").length&&h("section#category .rows li").l((function(t){var e=h(t).find("a").F("href");h(t).click((function(){return location.href=e,!1}))}))})),h.ready((function(){h("section#downloadable").length&&h("section#downloadable .col2 img").l((function(t){var e=h(t).F("src").match(/([a-z]+)\.png$/)[1];h(t).click((function(){return function(t){var e="puzzle";"white"!==t&&(e+="_"+t);var n=h("section#downloadable").F("data-id"),o="//"+window.location.hostname+"/static/"+e+"/word-search-"+n+".png";h(".download-image").F("src",o),h(".download-image-btn").F("href",o),window.set_share_img(o)}(e),!1}))}))})),h("#gcse-search").length){var i='<div class="gcse-search"></div>';"0"===getCookiePref(2)&&(i='<div class="gcse-search" data-personalizedAds="false"></div>'),h("#gcse-search").html(i);h("head").nt("https://cse.google.com/cse.js?cx=partner-pub-1107925068996705:4464867361",!0)}h.ready((function(){h(".menu").click((function(){h("nav").ut("open").C("show",.25,"blind","linear","top left")}))})),h.ready((function(){var t=document.createEvent("Event");t.initEvent("themechange",!0,!0);var e=new h.localStorage,n="dark",o="light",i=h("body");h("nav").create({type:"div",class:"switch_theme",html:'<svg role="img"><use xlink:href="/v4/img/icons.svg#switch"/></svg> Switch Theme',onclick:function(){var r=e.get("theme");(r=r==n?o:n)==n?(i.it(o),i.u(n)):i.it(n),e.set("theme",r),document.dispatchEvent(t)}})}));var r,a,c,s=function(){var t={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3},e=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen"],n=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen"],o=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen"],i="undefined"!=typeof window&&void 0!==window.document?window.document:{},r="fullscreenEnabled"in i&&Object.keys(t)||e[0]in i&&e||n[0]in i&&n||o[0]in i&&o||[];return{requestFullscreen:function(e){return e[r[t.requestFullscreen]]()},get exitFullscreen(){return i[r[t.exitFullscreen]].bind(i)},get fullscreenEnabled(){return Boolean(i[r[t.fullscreenEnabled]])},get Eo(){return!!i[r[t.fullscreenElement]]}}}(),l={},u={},f={};l._o=function(t){r=t;var e=document.location.hostname;e&&e!=atob("dGhld29yZHNlYXJjaC5jb20=")||(t=JSON.parse(t),u=new v,window.settings=u,window.settings.setSetting=u.setSetting,window.settings.getSetting=u.getSetting,f=new y,(a={}).title=t.title,a.words=t.words,a.To=t.id,a.Vt=14,a.Zt=12,a.format=u.getSetting("format"),a.allowDiagonalWords=u.getSetting("allowDiagonalWords"),a.allowReverseWords=u.getSetting("allowReverseWords"),a.kidMode=u.getSetting("kidMode"),a.dragSelect=u.getSetting("dragSelect"),l.ao(a,d))};var d=function(){c.it("puzzle-loader"),h.ft="/v4/img/icons.svg";var t=h.dt("hex");"hex"==a.format&&(t=h.dt("sq"));var e='<div id="gOver"><div class="goBox">';"iPhone"!=D&&"iPad"!=D||(e+='<button id="goNote" class="goNote"><p>Instructions</p>for '+D+" users</button>",h("#opt-btns").Y('<button class="smBtn goNote">'+h.dt("info")+"Note for "+D+" Users</button>")),e+='<p style="font-size:28px;font-variant:small-caps;">ready to play</p>',e+='<button id="gBegin" class="goBtn">'+h.dt("finger")+"begin</button>",e+='<button class="goBtn3 shape-btn" onclick="toggleShape()">'+t+"Change grid shape</button>",e+='<button class="goBtn3 set-btn" onclick="show_settings()">'+h.dt("cog")+"Settings / Difficulty</button>",e+="</div></div>",c.Y(e),h("#gBegin").click((function(){h("#gOver").hide(),l.uo(),X&&l.wo()})),h(".goNote").click((function(){"iPhone"==D?h.alert("iPhone Users","<p>If you're using Safari on an iPhone, before pressing the 'begin' button, scroll down the page a little. This will force the bottom toolbar to be hidden, allowing more space for the puzzle to display.</p><p>Alternatively, if you add our site to your home screen, it will open without any toolbars, giving the puzzles maximum space. Click the ".concat(h.dt("safari-menu")," icon in the toolbar, and choose \"Add to Home Screen\". If you do this, be sure to turn off the 'Touch Deadzone' game setting.</p>")):"iPad"==D&&h.alert("iPad Users","<p>It is recommended on iPad to add our site to your home screen. This will allow the game to open without any toolbars, giving the puzzles maximum space. Click the ".concat(h.dt("safari-menu"),' icon in the toolbar, and choose "Add to Home Screen".</p>'))}))};h.ready((function(){(c=h("#gameGrid")).length&&l._o(h.lt(h("#game-data").html()))}));function v(){var t=this;t.vt,t.settings,t.init=function(){try{t.vt="localStorage"in window&&null!==window.localStorage}catch(e){t.vt=!1}t.wt()},t.wt=function(){t.vt&&(t.settings=t.gt(),localStorage.settings&&Object.assign(t.settings,JSON.parse(localStorage.settings)))},t.setSetting=function(e){t.vt&&("true"==e.ht?e.ht=!0:"false"==e.ht&&(e.ht=!1),t.settings[e.id]=e.ht,localStorage.settings=JSON.stringify(t.settings))},t.getSetting=function(e){return t.vt?t.settings[e]:{}},t.bt=function(e){t.vt&&(t.settings[e]?t.settings[e]=!1:t.settings[e]=!0,localStorage.settings=JSON.stringify(t.settings))},t.gt=function(){return{audio:!0,showGrid:!0,dragSelect:!0,allowHints:!0,kidMode:!1,allowReverseWords:!0,allowDiagonalWords:!0,gridFont:"rubik",gridFontSize:0,fontBold:!0,gridTheme:"light",useLowercase:!1,format:"rect",numplayed:0,btmDeadzone:0}},t.init()}window.toggleShape=function(){"hex"==u.getSetting("format")?u.setSetting({id:"format",ht:"rect"}):u.setSetting({id:"format",ht:"hex"}),reInitGame()},window.reInitGame=function(){c.html(""),c.u("puzzle-loader"),setTimeout((function(){l._o(r)}),100)};var w=function(){h.X("Game Settings",function(){var t='<div style="text-align:center"><button onclick="reInitGame()" class="msc-destroy" style="background:#607D8B;color:#fff;width:70%;font-weight:400;font-size:14px;border-radius:50px;">Save & Restart</button></div>',e=t;return e+='<p style="font-size:.8em;text-align:center">Changed will only take effect next time you begin a new game</p>',e+=g("audio","Sounds",0),e+=g("gridFont","Game Font",[["Rubik"],["Montserrat"],["PatrickHand"],["FredokaOne"],["RussoOne"],["VarelaRound"],["OpenDyslexic"]]),e+=g("gridFontSize","Game Font Size",[["Small","-4"],["Normal","0"],["Big","+4"],["Bigger","+8"],["Biggest","+12"]],"Applies to the letter grid"),e+=g("fontBold","Use Bold Font",0),e+=g("useLowercase","Use Lowercase Letters",0),e+=g("showGrid","Display Grid Lines",0,"Does not apply to hex grids"),e+=g("dragSelect","Word Selection Method",[["Tap","false"],["Drag","true"]],"Drag : Selects words in grid by dragging across the hidden word<br />Tap : Selects words by taping the first and last letters in the grid"),e+=g("kidMode","Kids Mode",0,"Extra letters will not be added to the game grid making it easier to find the words"),e+=g("allowReverseWords","Allow Reverse Words",0,"When ON, words can appear in grid in reverse, either Right->Left  or Bottom->Top"),e+=g("allowDiagonalWords","Allow Diagonal Words",0,"When ON, words can appear diagonally in the grid. If reverse setting above is also on, then words may appear diagonally reversed"),e+=g("allowHints","Allow Hints",0,"When ON, taping on a word will highlight it's first letter in the grid"),X&&(e+=g("btmDeadzone","Touch Deadzone",[["Auto","0"],["None","-1"],["Small","36"],["Big","72"]],"When ON, the puzzle will leave a gap at the bottom of your screen. Useful if your device has a bottom toolbar which blocks the puzzle.")),e+"<br><br>"+t}(),!0,"settings-wrap","#gameGrid"),b()};window.show_settings=w;var p,m=[],g=function(t,e,n,o){n=n||[["Off","false"],["On","true"]];for(var i='<label for="'+t+'Flip" style="font-weight:bold">'+e+'</label><select name="'+t+'" id="'+t+'Flip" onchange="changeSetting(\''+t+"', this)\">",r=0;r<n.length;r++){var a=n[r][0];i+='<option value="'+(n[r][1]||n[r][0]).toLowerCase()+'">'+a+"</option>"}return i+="</select>",o=o?'<p class="tt">'+o+"</p>":"",m.push(t),'<div class="row">'+i+o+"</div>"},b=function(){m.forEach((function(t){h("#"+t+"Flip").ht(u.getSetting(t).toString())}))};function y(){var t=this;t.zo=".mp3",t.path="/v4/sounds/",t.init=function(){(t.AudioContext=window.AudioContext||window.webkitAudioContext,t.AudioContext)&&((new Audio).canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(t.zo=".ogg"))},t.Ao=function(e,n){t[e]&&n(t[e]),t.context||(t.context=new t.AudioContext);var o=new XMLHttpRequest;o.open("GET",t.path+e+t.zo,!0),o.responseType="arraybuffer",o.onload=function(){t.context.decodeAudioData(o.response,(function(o){t[e]=o,n(o)}))},o.send()},t.play=function(e){u.getSetting("audio")&&t.AudioContext&&t.Ao(e,(function(e){var n=t.context.createBufferSource();n.buffer=e,n.connect(t.context.destination),n.start(0)}))},t.init()}window.changeSetting=function(t,e){u.setSetting({id:t,ht:h(e).ht()}),l.Dt()},h.ready((function(){var t=h(".settings-btn");t.length&&t.on("click",w)}));var k={light:{kt:"#fefffb",yt:"#CCC",xt:"#333",Ct:"transparent",Ot:"#FFF",Ft:"#222",St:"#888",Tt:"#8D8D8D",Mt:"#3399FF",zt:["#E451FF","#00E874","#FF7E53","#768DED","#6BEE64","#FF8811","#5FAFAF","#63E91B","#7B1CF0","#FF0939","#EF93FF","#59FFAC","#FFA384","#A9B8F3","#A9F5A5","#FFB56A","#94C9C9","#98F068","#B078F5","#FF6685"]},dark:{kt:"#333",yt:"#000",xt:"#FFF",Ft:"#333",Tt:"#ff3939",Mt:"#FFF",At:"#ccc"},blue:{kt:"#263d6f",yt:"#CCC",xt:"#FFF",Ft:"#263d6f",Tt:"#ff3939",Mt:"#63E91B",zt:["#a3c6ff"],At:"#8ca342"},red:{kt:"#661613",yt:"#ff615b",xt:"#FFF",Ft:"#333",Tt:"#ff3939",Mt:"#fff23f",zt:["#cffcc7"],At:"#fc5d95",_t:["#fc9e83"]}},x={light:{Ot:"#555",Ft:"#faffe4"},dark:{Ot:"#222",Ft:"#faffe4"},blue:{Ot:"#222",Ft:"#faffe4"},red:{Ot:"#222",Ft:"#FFF"}};l.Gt=function(){var t=u.getSetting("gridTheme");for(var e in p=JSON.parse(JSON.stringify(k.light)),k[t])p[e]=k[t][e];if(h("body").U("dark"))for(var e in x[t])p[e]=x[t][e];"hex"==I.format&&(p.At&&(p.Mt=p.At),p._t&&(p.zt=p._t))},h.ready((function(){h(document).on("themechange",(function(){u.getSetting&&(l.Gt(),l.Dt())}))}));var S=function(){h.L(),h.X("Found a Misspelling?",function(){var t="";t+='<div style="font-size:.8em;text-align:center">Please click on the misspelt word to correct it.</div>',t+="<ul>";for(var e=I.words,n=0;n<e.length;n++)t+="<li>"+e[n].Qt.toUpperCase()+"</li>";return t+"</ul>"}(),!0,"misspelling-wrap","#gameGrid"),h(".misspelling-wrap li").click((function(){var t=h(this).html();h.L(),h.X("Correct a Misspelling",function(t){var e="<p>Thank you for making thewordsearch.com better</p>";return e+='<label>Current spelling</label><span class="miss_orig">'+t+"</span>",e+='<label>Corrected spelling</label><input class="miss_new" type="text">',e+'<button class="sub-btn" onclick="misspell_submit()">Submit Your Correction</button><div class="err"></div>'}(t),!0,"misspelling-wrap","#gameGrid")}))};window.misspell_pop=S;var F=function(t){var e=h(".misspelling-wrap .sub-btn").J();if(t)return z=!0,void h(e).html("...submitting");z=!1,h(e).html("Submit")},z=!1;window.misspell_submit=function(){if(!z){z=!0,F(!0);var t,e={puzzle_id:I.To,original_word:h(".miss_orig").html(),new_word:h(".miss_new").ht()},n=(t=e.new_word).length<3?"Word is too short":/^[A-Za-z '-.]*$/.test(t)?void 0:"Only letters a-z plus '-, are allowed";if(n)return h(".misspelling-wrap .err").html("Error : "+n),void F(!1);h.v({url:"/api/pri/testapikey/word_correction/",method:"POST",p:e,g:C,m:function(){h(".misspelling-wrap .err").html("There was a problem connecting to the server"),F(!1)}})}};var C=function(t){z=!1;var e="<p>Thank you, your correction will be reviewed</p>";e+='<button class="sub-btn" onclick="misspell_close()">Close</button>',e+='<button class="sub-btn" style="background:none;border:1px solid #333" onclick="'+S.name+'()">Another Correction</button>',h(".misspelling-wrap .msc-body").html(e)};window.misspell_close=h.L;var O=function(){h.X("Game Themes",'<div style="font-size:.8em;text-align:center">Click on a theme to try it out</div><img src="/v4/img/theme-light.png" class="msc-destroy" onclick="changeTheme(\'light\')"><img src="/v4/img/theme-dark.png" class="msc-destroy" onclick="changeTheme(\'dark\')"><img src="/v4/img/theme-blue.png" class="msc-destroy" onclick="changeTheme(\'blue\')"><img src="/v4/img/theme-red.png" class="msc-destroy" onclick="changeTheme(\'red\')">',!0,"themes-wrap","#gameGrid")};window.changeTheme=function(t){u.setSetting({id:"gridTheme",ht:t}),l.Gt(),l.Dt()},h.ready((function(){h(".theme-btn").length&&h(".theme-btn").on("click",O)}));var T,M,E,A,B,P,G,D,_,N,I={},R={},j={w:680,h:780},W={},L="Calibri, Trebuchet MS, Arial, sans-serif",H="30",J=0,q=!0,U=1,$=!1,X=!1,Y=0;l.ao=function(t,e){(I=JSON.parse(JSON.stringify(t))).Vt=parseInt(I.Vt),I.Zt=parseInt(I.Zt),H=14-Math.min(I.Vt,I.Zt)+26,isNaN(H)&&(H=26),l.Gt(),(D=h.V())&&(X=!0),X&&($=!0,q=!1,j={w:540,h:960},J=parseInt(u.getSetting("btmDeadzone")),"iPhone"==D&&0==J?J=72:-1==J&&(J=0),l.co()),l.so(),l.lo(),"hex"==I.format?l.Pe():l.Et(),u.getSetting("allowHints")&&l.eo(),l.uo(),e&&e()},l.uo=function(){G=I.Pt?l.fo()-I.do:l.fo()},l.Dt=function(){l.Bo(),l.Po()},l.Po=function(){"hex"==I.format?l.We():l.Nt()},l.Bo=function(){var t=u.getSetting("gridFont"),e=u.getSetting("fontBold")?"bold":"";N!=t&&["montserrat","russoone","varelaround","opendyslexic"].indexOf(t)&&((_=_||h("body").create(">span#fontPreLoader").html("&nbsp;")).M("font-family",t),setTimeout(l.Po,500));var n=H+parseInt(u.getSetting("gridFontSize"));N=t,B="".concat(e," ").concat(n,"px ").concat(t,", ").concat(L),P="".concat(e," 16px ").concat(t,", ").concat(L)},String.prototype.reverse=function(){return this.split("").reverse().join("")},l.ho=function(){window.innerHeight<700&&(U=.91),R.x=U,R.y=U;var t=j.h,e=j.w;return X&&(U=1,t=window.outerWidth-0,e=window.outerHeight-0,R.x=t/j.w,R.y=e/j.h),{w:t,h:e}},l.lo=function(){var t,e=l.ho(),n=h("#gameGrid");(h("#fs-style").length||h("body").create(">style#fs-style"),T=l.vo("wsGrid",e.w,e.h,1,"gameGrid"),M=T.getContext("2d"),$||(e.w-=W.yn),E=l.vo("wsGridOverlay",e.w,e.h,1,"gameGrid"),A=E.getContext("2d"),X)?(n.create(">button.sml-back-btn").click((function(){l.wo()})),h(T).M({width:"100%",height:"auto"}),h(E).M({width:"100%",height:"auto"}),window.onresize=function(){t&&clearTimeout(t),t=setTimeout(l.po,100)},M.scale(R.x*U,R.y*U),A.scale(R.x*U,R.y*U),l.po()):1!=U&&n.M("transform-origin","top left").M("transform","scale("+U+")").M("margin-bottom",684*U-684+"px")},l.bo=!1,l.co=function(){if(Y=window.innerWidth>window.innerHeight?90:0,l.bo&&(l.bo=!1,h.L()),Y&&K){h.X("PAUSED",'<br><p style="font-size:1.2em">please rotate your device to portrait mode</p>',!1,"dialog-go-fullscreen","#gameGrid",!1),l.bo=!0}return Y},l.mo=!1,l.ko=function(){if(!l.mo){window.gofs=function(){h.L(),l.wo()},window.igfs=function(t){l.mo=!0,h.L()};'<button onclick="igfs()">play without fullscreen</button>',h.X("PAUSED",'<button onclick="gofs()" style="color:green;font-size:1.8em;">return to fullscreen</button><button onclick="igfs()">play without fullscreen</button>',!1,"dialog-go-fullscreen","#gameGrid",!1)}},l.po=function(){var t={};t.w=window.innerWidth-0,t.h=window.innerHeight-0-J,s.Eo?t.h=window.screen.availHeight-0-J:K&&l.wo(!0),l.co(),ot={},h("#fs-style").html("#puzzle.is-full-screen canvas{width:"+t.w+"px !important;height:"+t.h+"px !important}")};var K=!1;function V(){s.fullscreenEnabled&&(s.Eo||s.requestFullscreen(document.body))}function Z(){s.Eo&&s.exitFullscreen()}l.wo=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=h("#puzzle"),n="is-full-screen";if(t)return K=!1,e.it(n),void Z();K=!K,e.ut(n),K?V():(l.ko(),Z())},l.vo=function(t,e,n,o,i){var r;return h("#"+t).length>0?((r=document.getElementById(t)).width=e*o,r.height=n*o,r.setAttribute("style","height:"+n+"px; width:"+e+"px;"),r):((r=document.createElement("canvas")).setAttribute("width",e*o),r.setAttribute("height",n*o),r.setAttribute("id",t),r.setAttribute("style","height:"+n*o+"px; width:"+e*o+"px;"),r.addEventListener("touchstart touchmove",(function(t){t.preventDefault()}),{passive:!0}),document.getElementById(i).appendChild(r),r)},l.Wt=function(t){window.requestAnimationFrame((function(){t.canvas.width=t.canvas.width,X&&t.scale(R.x,R.y)}))},l.yo=function(t){t.clearRect(0,0,t.canvas.width/R.x,t.canvas.height/R.y),t.canvas.style.display="none",t.canvas.offsetHeight,t.canvas.style.display="inherit"},l.fo=function(){return(new Date).getTime()/1e3},l.so=function(){W.cols=I.Zt,W.fn=I.Vt*I.Zt,q?l.xo():(W.He=.86*j.h,W.je=j.w,W.yn=.14*j.h,W.mn=W.je/I.Zt,W.gn=W.He/I.Vt)},l.xo=function(){W.He=j.w,W.je=.8*j.h,W.yn=.2*j.h,W.mn=W.je/I.Zt,W.gn=W.He/I.Vt,W.mn=Math.floor(W.mn),W.gn=Math.floor(W.gn)},l.Rt=function(){for(var t=0;t<I.words.length;t++){var e=I.words[t].toUpperCase();I.words[t]={Co:e,hn:!1,nn:0,en:0},I.words[t].Qt=e.replace(/[ '-.]/gi,"")}I.$t=[]},l.Ut=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)};var Q,tt,et,nt,ot={},it={},rt={};l.zn=function(t){null==ot.top&&(ot=E.getBoundingClientRect(),rt.x=ot.width/j.w,rt.y=ot.height/j.h);var e={};if(t.touches)if(t.touches[0]){var n=X?rt:R;e.x=(t.touches[0].clientX-ot.left-0)/n.x,e.y=(t.touches[0].clientY-ot.top-0)/n.y,it=e}else e=it;else e.x=(t.clientX-ot.left-0)/R.x,e.y=(t.clientY-ot.top-0)/R.y;return $&&(e.y<W.yn||e.x>W.je)&&(e.An=!0),e},l.jn=function(t){for(var e=I.words,n=0;n<e.length;n++)if(t==e[n].Qt)return e[n].hn?-1:n;t=t.reverse();for(n=0;n<e.length;n++)if(t==e[n].Qt)return e[n].hn?-1:n;return-1},l.Ln=function(t){var e=t%p.zt.length;return p.zt[e]},l.jt=function(){window.requestAnimationFrame((function(){l.Oo()}))},l.Oo=function(){M.globalAlpha=1,M.textAlign="left",M.font=P;if($){M.beginPath(),M.rect(0,0,j.w,W.yn),M.fillStyle=p.Ot,M.fill(),M.lineWidth=1,M.strokeStyle="#6A6D5C",M.stroke();var t=14,e=18,n=29,o=14}else{t=W.je+10,e=0;M.beginPath(),M.rect(W.je+4,1,W.yn-5,j.w-2),M.fillStyle=p.Ct,M.fill(),t+=10;n=27}Q=[];for(var i=M.measureText("•").width,r=[],a=0;a<I.words.length;a++)if(!I.words[a].hn){var c=r.push(I.words[a]);r[c-1].Fo=a}for(a=0;a<I.words.length;a++)I.words[a].hn&&r.push(I.words[a]);var s=1;for(a=0;a<r.length;a++){var f=M.measureText(r[a].Co).width;if($){var d=20;if(o+f+d>W.je){if(++s>5)break;t=14,e+=n,o=14}else t=o;o=o+f+d}else e+=n;14!=t&&$&&(M.fillStyle=p.Tt,M.fillText("•",t-(d+i)/2,e)),M.textBaseline="middle",r[a].hn?M.fillStyle=p.St:M.fillStyle=p.Ft;var v=r[a].Co;if(u.getSetting("useLowercase")&&(v=v.toLowerCase()),M.fillText(v,t,e),r[a].hn&&(M.globalAlpha=.8,M.strokeStyle=l.Ln(a),M.beginPath(),M.lineWidth=2,M.lineCap="round",M.moveTo(t,e),M.lineTo(t+f,e),M.stroke(),M.globalAlpha=1),0==r[a].hn){var w=new Object;w.x=t,w.y=e-n/2,w.x2=w.x+f,w.y2=w.y+n,w.io=r[a].Fo,Q[Q.length]=w}}},l.Jn=function(){for(var t=0;t<I.words.length;t++)if(0==I.words[t].hn)return!1;return!0},l.$n=function(){var t,e={};e.So=parseInt(l.fo()-G,10),t=I.To,h.v({url:"/api/pri/testapikey/log_played/?id="+t,method:"GET"});var n=u.getSetting("numplayed")+1;u.setSetting({id:"numplayed",ht:n}),setTimeout((function(){f.play("finished"),l.Mo(e),X&&(l.mo=!0,l.wo(!0))}),700)},l.Mo=function(t){var e='<div id="gOver2"><div class="goBox">';e+='<p style="font-size:54px;margin:30px 0 12px 0;">Well done!</p>',e+='<p style="font-size:22px;margin-bottom:66px;">You completed the puzzle in '+t.So+" seconds</p>",e+='<button class="goBtn2" onclick="window.location=\'/\'">Find another puzzle</button>',e+='<br/><button class="goBtn2" onclick="window.location=\'.\'">Play again</button>',e+='<button class="misspelling-btn" onclick="misspell_pop()">Correct a misspelling</button>',e+="</div>",h("#gameGrid").Y(e)},l.Et=function(){l.Bt(),I.Pt||(l.Rt(),l.It()),l.Dt()},l.Nt=function(){l.Wt(M),l.jt(),l.Ht()},l.Jt=function(){for(var t=[],e=I.$t.length,n=0;n<e;n++)et.forEach((function(e){var o={};o.Lt=n,o.orientation=e,t.push(o)}),this);return t},l.qt=function(t,e,n){et.forEach((function(o){for(var i=0;i<t.length-1;i++)t[i].Lt==e&&t[i].orientation==n&&t.splice(i,1)}),this)},l.Xt=function(t){return l.Ut(0,t.length-1)},l.It=function(){var t=I.words;l.Yt(),l.Kt(),tt=Math.max(I.Vt,I.Zt);for(var e=l.Jt(),n=0;n<t.length;n++){for(var o=-1,i=10001,r=JSON.parse(JSON.stringify(e));o<0&&!(t[n].Qt.length>tt)&&(i--,o=l.tn(t[n].Qt,r),!(i<2)););o instanceof Array?(t[n].nn=o[0],t[n].en=o[1]):(I.words.splice(n,1),n--)}l.rn()},l.Yt=function(){for(var t=I.Vt*I.Zt,e=0;e<t;e++)I.$t[e]=""},l.tn=function(t,e){if(!t)return-1;if(t.length>tt)return-1;var n=l.Xt(e),o=e[n].Lt,i=e[n].orientation,r=l.an(t,o,i);return r instanceof Array?r:(l.qt(e,o,i),-1)},l.an=function(t,e,n,o){o||(o=!1);var i=I.$t,r=n,a=t,c=e,s=!1;switch(n){case"bt":r="tb",s=!0;break;case"rl":r="lr",s=!0;break;case"brtl":r="tlbr",s=!0;break;case"bltr":r="trbl",s=!0}s&&(a=a.reverse());var u,f=i.length-1;switch(r){case"tb":for(var d=0;d<a.length;d++){if(o)l.cn(c,a[d]);else{if(c>f)return-1;if(i[c].length>0&&i[c]!=a[d])return-2}u=c,c+=I.Zt}break;case"lr":var v=l.sn(c);for(d=0;d<a.length;d++){if(o)l.cn(c,a[d]);else{if(c>f)return-1;if(v!=l.sn(c))return-1;if(i[c].length>0&&i[c]!=a[d])return-2}u=c,c+=1}break;case"tlbr":case"trbl":for(v=l.sn(c),d=0;d<a.length;d++){if(o)l.cn(c,a[d]);else{if(c>f)return-1;if(l.sn(c)!=v+d)return-1;if(i[c].length>0&&i[c]!=a[d])return-2}u=c,c="tlbr"==r?c+1+I.Zt:c-1+I.Zt}}if(o){var w=e,p=u;return s&&(w=u,p=e),[w,p]}return l.an(t,e,n,!0)},l.cn=function(t,e){I.$t[t]=e},l.ln=function(){return l.Ut(0,I.$t.length-1)},l.Kt=function(){var t=["tb","tb","tb","tb","lr","lr","lr","lr"];I.allowDiagonalWords&&(t=t.concat(["tlbr","tlbr","tlbr","bltr","bltr"])),I.allowReverseWords&&(t=t.concat(["bt","bt","rl","rl"])),I.allowDiagonalWords&&I.allowReverseWords&&(t=t.concat(["trbl","trbl","brtl","brtl"])),et=t},l.un=function(){var t=l.Ut(0,et.length-1);return et[t]},l.sn=function(t){return Math.ceil((t+1)/I.Zt)},l.rn=function(){for(var t="",e=0;e<I.words.length;e++)t+=I.words[e].Qt;for(e=0;e<W.fn;e++)I.kidMode&&""==I.$t[e]?I.$t[e]=" ":""==I.$t[e]&&(I.$t[e]=t.charAt(Math.floor(Math.random()*t.length)))},l.Ht=function(){for(var t=0;t<W.fn;t++)l.dn(t,M);for(t=0;t<I.words.length;t++)1==I.words[t].hn&&l.vn(t,I.words[t].nn,I.words[t].en);for(t=0;t<W.fn;t++)l.wn(t,M)},l.pn=function(t){return Math.floor(t/I.Zt+1)*W.gn-W.gn},l.bn=function(t){return Math.floor(t%I.Zt+1)*W.mn-W.mn},l.dn=function(t,e,n){window.requestAnimationFrame((function(){l.kn(t,e,n)}))},l.kn=function(t,e,n){var o=l.pn(t),i=l.bn(t);$&&(o+=W.yn),e.globalAlpha=1,n?(e.strokeStyle="#FF9933",e.fillStyle="#FFCD9B",e.lineWidth=3,e.fillRect(i,o,W.mn,W.gn),e.strokeRect(i+2,o+2,W.mn-4,W.gn-4)):(e.fillStyle=p.kt,e.fillRect(i,o,W.mn,W.gn),u.getSetting("showGrid")&&(e.strokeStyle=p.yt,e.lineWidth=1,e.strokeRect(i+0,o+0,W.mn-0,W.gn-0)))},l.wn=function(t,e){window.requestAnimationFrame((function(){l.xn(t,e)}))},l.xn=function(t,e){var n=l.pn(t),o=l.bn(t);$&&(n+=W.yn),e.globalAlpha=1,e.font=B,e.textBaseline="middle",e.fillStyle=p.xt;var i=I.$t[t];u.getSetting("useLowercase")&&(i=i.toLowerCase());var r=e.measureText(i).width,a=Math.floor((W.mn-r)/2);e.fillText(i,o+a,n+W.gn/2+1)},l.Cn=function(t,e,n,o){window.requestAnimationFrame((function(){l.On(t,e,n,o)}))},l.On=function(t,e,n,o){t.globalAlpha=.5,t.beginPath(),t.strokeStyle=e,nt||(nt=.8*Math.min(W.mn,W.gn)),t.lineWidth=nt,t.lineCap="round",t.moveTo(n.x,n.y),t.lineTo(o.x,o.y),t.stroke(),t.closePath()};var at=null,ct=null,st={},lt=!1;l.Bt=function(){h.rt(),h("#wsGridOverlay").on(h.at,l.Fn),I.dragSelect&&(h("#wsGridOverlay").on(h.ct,l.Sn),h("#wsGridOverlay").on(h.st,l.Tn))},l.Fn=function(t){ot={};var e=l.zn(t);if(!e.An)if(I.dragSelect){at=l._n(e.x,e.y);var n=l.Gn(at);st.x=n.x-W.mn/2,st.y=n.y-W.gn/2,lt=!0}else if(at){var o=l._n(e.x,e.y);l.Dn(o),l.En(at,o)?f.play("correct"):f.play("wrong"),setTimeout(l.Bn,300),at=null}else at=l._n(e.x,e.y),l.Dn(at)};var ut=0;l.Tn=function(t){if(lt){var e=Date.now();if(!(ut+50>e)){ut=e;var n=l.zn(t);if(!n.An){l.Wt(A),l.Cn(A,"#3399FF",st,n);var o=l._n(n.x,n.y);if(o!=ct)ct=o,l.En(at,o)&&(lt=!1,l.Wt(A),f.play("correct"),ft=!0)}}}};var ft=!1;l.Sn=function(t){if(ft)ft=!1;else{var e=l.zn(t);if(!e.An){var n=l._n(e.x,e.y);lt=!1,l.Wt(A),l.En(at,n)?f.play("correct"):f.play("wrong")}}},l._n=function(t,e){$&&(e-=W.yn);var n=Math.ceil(t/W.mn),o=Math.ceil(e/W.gn);return l.Pn(o,n)},l.Rn=function(t){var e=new Object;return e.In=Math.ceil(t/I.Zt),e.Nn=t-(e.In-1)*I.Zt,e},l.Pn=function(t,e){var n=0;return e>0&&t>0&&(n=t*I.Zt+e-I.Zt),n},l.Gn=function(t){var e=l.Rn(t),n=new Object;return n.x=e.Nn*W.mn,n.y=e.In*W.gn,$&&(n.y=n.y+W.yn),n},l.Dn=function(t){l.dn(t-1,A,!0),l.wn(t-1,A)},l.Bn=function(){l.Wt(A)},l.En=function(t,e){var n=l.Wn(t,e);if(n){var o=l.jn(n);return o>-1&&(l.Hn(o,t,e),l.Nt(),l.Jn()&&l.$n(),!0)}},l.Wn=function(t,e){if(t==e)return"";var n="",o=l.Rn(t),i=l.Rn(e),r=I.$t;if(o.In==i.In)if(o.Nn<i.Nn)for(var a=o.Nn;a<i.Nn+1;a++)n+=r[l.Pn(o.In,a)-1];else for(a=o.Nn;a>=i.Nn;a--)n+=r[l.Pn(o.In,a)-1];else if(o.Nn==i.Nn)if(o.In<i.In)for(a=o.In;a<i.In+1;a++)n+=r[l.Pn(a,o.Nn)-1];else for(a=o.In;a>=i.In;a--)n+=r[l.Pn(a,o.Nn)-1];else{if(Math.abs(o.In-i.In)!=Math.abs(o.Nn-i.Nn))return"";if(e>t)if(i.Nn>o.Nn)for(a=t;a<=e;a=a+I.Zt+1)n+=r[a-1];else for(a=t;a<=e;a=a+I.Zt-1)n+=r[a-1];else if(o.Nn>i.Nn)for(a=t;a>=e;a=a-I.Zt-1)n+=r[a-1];else for(a=t;a>=e;a=a-I.Zt+1)n+=r[a-1]}return n},l.jn=function(t){for(var e=I.words,n=0;n<e.length;n++)if(t==e[n].Qt)return e[n].hn?-1:n;t=t.reverse();for(n=0;n<e.length;n++)if(t==e[n].Qt)return e[n].hn?-1:n;return-1},l.vn=function(t,e,n){var o=l.Gn(e);o.x=o.x-W.mn/2,o.y=o.y-W.gn/2;var i=l.Gn(n);i.x=i.x-W.mn/2,i.y=i.y-W.gn/2,l.Cn(M,l.Ln(t),o,i)},l.Hn=function(t,e,n){I.words[t].hn=!0,I.words[t].nn=e,I.words[t].en=n};var ht,dt=dt||{};function vt(t){var e=[],n=ht.qn[t],o=!1,i=2*W.cols-1;n.In%2==0&&(o=!0,i--),1==n.In?(e[0]=null,e[5]=null):n.In==W.rows&&(e[2]=null,e[3]=null),o||n.Nn!=i?o&&n.Nn==i&&(e[1]=null):(e[0]=null,e[1]=null,e[2]=null),o||1!=n.Nn?o&&2==n.Nn&&(e[4]=null):(e[3]=null,e[4]=null,e[5]=null);for(var r=0;r<6;r++)if(null!==e[r])switch(r){case 0:var a=parseInt(t)-W.cols+1;e[0]=a;break;case 1:a=parseInt(t)+1;e[1]=a;break;case 2:a=parseInt(t)+W.cols;e[2]=a;break;case 3:a=parseInt(t)+W.cols-1;e[3]=a;break;case 4:a=parseInt(t)-1;e[4]=a;break;case 5:a=parseInt(t)-W.cols;e[5]=a}return e}function wt(t,e){return ht.qn[t].In==ht.qn[e].In||Math.abs(ht.qn[t].In-ht.qn[e].In)==Math.abs(ht.qn[t].Nn-ht.qn[e].Nn)}function pt(t,e){var n=ht.qn[t],o=ht.qn[e];return n.In==o.In?o.Nn>n.Nn?1:4:o.Nn<n.Nn?o.In>n.In?3:5:o.In>n.In?2:0}dt.Xn=function(t,e){this.X=t,this.Y=e},dt.Kn=function(t,e,n,o){this.X=t,this.Y=e,this.Vn=n,this.Zn=o},dt.Qn=function(t,e,n,o){this.te=t,this.ne=e,this.ee=n,this.oe=o},dt.ie=function(t,e,n){this.re=[];var o=null,i=null;dt.ie.ce.ae==dt.ie.le.se?(o=(dt.ie.ce.ue-dt.ie.ce.fe)/2,i=dt.ie.ce.de/2,this.re.push(new dt.Xn(o+e,n)),this.re.push(new dt.Xn(o+dt.ie.ce.fe+e,n)),this.re.push(new dt.Xn(dt.ie.ce.ue+e,i+n)),this.re.push(new dt.Xn(o+dt.ie.ce.fe+e,dt.ie.ce.de+n)),this.re.push(new dt.Xn(o+e,dt.ie.ce.de+n)),this.re.push(new dt.Xn(e,i+n))):(o=dt.ie.ce.ue/2,i=(dt.ie.ce.de-dt.ie.ce.fe)/2,this.re.push(new dt.Xn(o+e,n)),this.re.push(new dt.Xn(dt.ie.ce.ue+e,i+n)),this.re.push(new dt.Xn(dt.ie.ce.ue+e,i+dt.ie.ce.fe+n)),this.re.push(new dt.Xn(o+e,dt.ie.ce.de+n)),this.re.push(new dt.Xn(e,i+dt.ie.ce.fe+n)),this.re.push(new dt.Xn(e,i+n))),this.he=t,this.ve="",this.x=e,this.y=n,this.x1=o,this.y1=i,this.we=new dt.Xn(this.x,this.y),this.pe=new dt.Xn(this.x+dt.ie.ce.ue,this.y+dt.ie.ce.de),this.ge=new dt.Xn(this.x+dt.ie.ce.ue/2,this.y+dt.ie.ce.de/2),this.be=new dt.Xn(e+o,n+i),this.selected=!1},dt.ie.prototype.me=function(t,e,n){window.requestAnimationFrame(function(){t.strokeStyle=p.kt,t.fillStyle=p.kt,u.getSetting("showGrid")&&(t.strokeStyle=p.yt),void 0!==this.ke&&(t.fillStyle=l.Ln(this.ke)),n&&(t.fillStyle=p.Mt),t.lineWidth=1,t.beginPath(),t.moveTo(this.re[0].X,this.re[0].Y);for(var e=1;e<this.re.length;e++){var o=this.re[e];t.lineTo(o.X,o.Y)}if(t.closePath(),t.stroke(),t.fill(),this.ve){t.fillStyle=p.xt,t.font=B,t.textAlign="center",t.textBaseline="middle";var i=this.ve;u.getSetting("useLowercase")&&(i=i.toLowerCase()),t.fillText(i,this.ge.X,this.ge.Y+1)}}.bind(this))},dt.ie.prototype.ye=function(t,e){return this.xe(new dt.Xn(t,e))},dt.ie.prototype.Ce=function(t){return this.we.X<t.X&&this.we.Y<t.Y&&t.X<this.pe.X&&t.Y<this.pe.Y},dt.ie.prototype.xe=function(t){var e=!1;if(this.Ce(t)){var n,o=0;for(n=0,o=this.re.length-1;n<this.re.length;o=n++){var i=this.re[n],r=this.re[o];(i.Y<=t.Y&&t.Y<r.Y||r.Y<=t.Y&&t.Y<i.Y)&&t.X<(r.X-i.X)*(t.Y-i.Y)/(r.Y-i.Y)+i.X&&(e=!e)}}return e},dt.ie.prototype.Oe=function(t){var e=this.ge.X-t.X,n=this.ge.Y-t.Y;return Math.sqrt(e*e+n*n)},dt.ie.le={se:0,Fe:1},dt.Se=function(t,e,n){n||(n=1),this.qn=[];for(var o=0,i=0+n;i+dt.ie.ce.de<=e+n;){var r=0,a=0;o%2==1&&(a=dt.ie.ce.ae==dt.ie.le.se?(dt.ie.ce.ue-dt.ie.ce.fe)/2+dt.ie.ce.fe:dt.ie.ce.ue/2,r=1);for(var c=a+1;c+dt.ie.ce.ue<=t;){var s=this.Te(o,r),h=new dt.ie(s,c,i);dt.ie.ce.ae==dt.ie.le.se?h.Me=r:h.ze=o,h.In=o+1,h.Nn=r+1,this.qn.push(h),r+=2,dt.ie.ce.ae==dt.ie.le.se?c+=dt.ie.ce.ue+dt.ie.ce.fe:c+=dt.ie.ce.ue}o++,dt.ie.ce.ae==dt.ie.le.se?i+=dt.ie.ce.de/2:i+=(dt.ie.ce.de-dt.ie.ce.fe)/2+dt.ie.ce.fe}W.fn=W.rows*W.cols},dt.Se.ce={Ae:"ABCDEFGHIJKLMNOPQRSTUVWXYZ"},dt.Se.prototype.Te=function(t,e){for(var n=t,o="";n>25;)o=dt.Se.ce.Ae[n%26]+o,n-=26;return dt.Se.ce.Ae[n]+o+(e+1)},dt.Se.prototype._e=function(t){for(var h in this.qn)if(this.qn[h].xe(t))return h;return null},dt.Se.prototype.Ge=function(t,e){var n=t.Me-e.Me,o=t.ze-e.ze;return(Math.abs(n)+Math.abs(o)+Math.abs(n-o))/2},dt.Se.prototype.De=function(t){for(var e in this.qn)if(this.qn[e].he==t)return this.qn[e];return null},dt.Se.prototype.Ee=function(t){var e,n=Number.MAX_VALUE,o=null;for(var h in this.qn)(e=this.qn[h].Oe(t))<n&&(n=e,o=this.qn[h]);return o},dt.ie.ce={de:40,ue:40,fe:20,ae:dt.ie.le.Fe,Be:!1},l.Pe=function(){l.Re(),l.Ie(),I.Pt||(l.Rt(),l.Ne()),l.Dt()},l.Re=function(){if(function(t,e){e+=2;var n=-2*--t,o=Math.pow(t,2)+Math.pow(e,2),i=(-n-Math.sqrt(Math.pow(n,2)- -12*o))/-6;dt.ie.ce.ue=t,dt.ie.ce.de=e,dt.ie.ce.fe=i}(W.mn,W.gn),$)var t=W.yn;else t=0;ht=new dt.Se(W.je,W.He,t)},l.Ne=function(){var t=I.words,e=ht.qn.length-1;if(I.allowReverseWords)var n=[1,1,1,1,2,2,2,2,0,0,0,4,4,4,5,5,6,6];else n=[1,1,1,1,2,2,2,2,0,0,0,0];for(var o=0,i=0;i<t.length;i++){var r=!1,a=0,c=!1,s=0;for(i%3==0&&(s=30);!(r||++a>60);){for(var u=null,f=t[i].Qt[0],d=0;!u;){if(++d>2*e)return;var v=l.Ut(0,e),w=ht.qn[v].ve;w&&w!=f||(u=v)}for(var p=null;!p;){p=n[v=l.Ut(0,n.length)]}var m=2*W.cols,g=W.rows,b=t[i].Qt.length,y=ht.qn[u];switch(p){case 0:y.Nn+b<=m&&y.In-b>=1&&(r=!0);break;case 1:y.Nn+2*b-1<=m&&(r=!0);break;case 2:y.Nn+b<=m&&y.In+b<=g&&(r=!0);break;case 3:y.Nn-b+1>=1&&y.In+b<=g&&(r=!0);break;case 4:y.Nn-2*b+2>=1&&(r=!0);break;case 5:y.Nn-(b+1)>=1&&y.In-b>=1&&(r=!0)}if(r)for(var k=u,x=0;x<b;x++){if(ht.qn[k].ve){if(ht.qn[k].ve!=t[i].Qt[x]){r=!1;break}c=!0}k=(S=vt(k))[p]}++s>30&&(c=!0),r&&c||(r=!1)}if(r){o++;for(k=u,x=0;x<b;x++){var S=vt(k);ht.qn[k].ve=t[i].Qt[x],k=S[p]}if(I.words[i].nn=u,I.words[i].en=k,o>20){x=I.words.length-i+1;I.words.splice(i+1,x);break}}else I.words.splice(i,1),i--}l.Je()},l.Je=function(){for(var t="",e=0;e<I.words.length;e++)t+=I.words[e].Qt;for(e=0;e<ht.qn.length;e++)I.kidMode&&""==ht.qn[e].ve?ht.qn[e].ve=" ":""==ht.qn[e].ve&&(ht.qn[e].ve=t.charAt(Math.floor(Math.random()*t.length)))},l.$e=function(){for(var t=0;t<ht.qn.length;t++)ht.qn[t].me(M,t)},l.We=function(){l.Wt(M),l.jt(),l.$e()},l.Le=function(t,e,n,o){if(n==o)return l.Wt(A),void ht.qn[n].me(t,n,!0);if(wt(n,o)){l.Wt(A);for(var i=pt(n,o),r=n;r!=o;){var a=vt(r);ht.qn[r].me(t,r,!0),(r=a[i])==o&&ht.qn[r].me(t,r,!0)}}};at=null,ct=null,st={},lt=!1;l.Ie=function(){h.rt(),h("#wsGridOverlay").on(h.at,l.qe),I.dragSelect&&(h("#wsGridOverlay").on(h.ct,l.Xe),h("#wsGridOverlay").on(h.st,l.Ue))},l.qe=function(t){ot={};var e=l.zn(t);if(!e.An)if(ft=!1,I.dragSelect){var n=new dt.Xn(e.x,e.y);at=ht._e(n),lt=!0,l.Le(A,"#3399FF",at,at)}else if(at){n=new dt.Xn(e.x,e.y);var o=ht._e(n);if(!o)return;l.Ye(o),l.Ke(at,o)?f.play("correct"):f.play("wrong"),setTimeout(l.Ve,300),at=null}else{var n=new dt.Xn(e.x,e.y);(at=ht._e(n))&&l.Ye(at)}};ut=0;l.Ue=function(t){if(lt){var e=Date.now();if(!(ut+50>e)){ut=e;var n=l.zn(t);if(!n.An){var o=new dt.Xn(n.x,n.y),i=ht._e(o);if(i)if(i!=ct)ct=i,l.Le(A,"#3399FF",at,i),l.Ke(at,i)&&(lt=!1,l.Wt(A),f.play("correct"),ft=!0)}}}};ft=!1;l.Xe=function(t){var e=l.zn(t);if(!e.An){var n=new dt.Xn(e.x,e.y),o=ht._e(n);if(ft)ft=!1;else lt=!1,l.Wt(A),l.Ke(at,o)?f.play("correct"):at!=o&&f.play("wrong")}},l.Ye=function(t){ht.qn[t].me(A,t,!0)},l.Ve=function(){l.Wt(A)},l.Ke=function(t,e){var n=l.Ze(t,e);if(n){var o=l.jn(n);return o>-1&&(l.Qe(o,t,e),l.no(o,t,e),l.Jn()&&l.$n(),!0)}},l.Ze=function(t,e){if(t==e)return"";if(!wt(t,e))return"";for(var n="",o=pt(t,e),i=t;i!=e;){var r=vt(i);n+=ht.qn[i].ve,(i=r[o])==e&&(n+=ht.qn[i].ve)}return n},l.no=function(t,e,n){for(var o=pt(e,n),i=t,r=e;r!=n;){var a=vt(r);ht.qn[r].hn=!0,ht.qn[r].ke=i,(r=a[o])==n&&(ht.qn[r].hn=!0,ht.qn[r].ke=i)}l.We()},l.Qe=function(t,e,n){I.words[t].hn=!0,I.words[t].nn=e,I.words[t].en=n},l.eo=function(){var t="#wsGrid";X&&(t="#wsGridOverlay"),h.rt(),h(t).on(h.at,l.oo)},l.oo=function(t){for(var e=l.zn(t),n=0;n<Q.length;n++)e.x>=Q[n].x&&e.x<=Q[n].x2&&e.y>=Q[n].y&&e.y<=Q[n].y2&&("hex"==I.format?(l.Ve(),at=I.words[Q[n].io].nn,l.Ye(at)):(l.Bn(),at=I.words[Q[n].io].nn+1,l.Dn(at)))}}();
